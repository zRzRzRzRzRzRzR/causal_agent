{
  "_description": "PDF-derived initial input template. One JSON object per line when used as jsonl.",
  "_equation_type_note": "Optional. Can be null and inferred downstream from equation_inference_hints + epsilon/modeling_directives.",
  "_input_redundancy_policy": {
    "auto_backfill_rules": [
      "If equation_type is null, infer from hints: has_joint_intervention->E6; has_counterfactual_query->E5; has_mediator->E4; has_survival_outcome->E2; has_longitudinal_timepoints->E3; else E1.",
      "If epsilon.rho.M missing and hpp_mapping.M has one element, backfill rho.M[0] from mapping.M[0].name.",
      "If E5 context mapping missing, fallback to epsilon.rho.Z variable names.",
      "If E6 rho.X1/X2 missing, backfill from epsilon.iota_1.core.name / epsilon.iota_2.core.name."
    ],
    "critical_fields_must_present": [
      "schema_version",
      "edge_id",
      "epsilon",
      "epsilon.o.type",
      "epsilon.rho.X",
      "epsilon.rho.Y",
      "hpp_mapping.X.dataset",
      "hpp_mapping.X.field",
      "hpp_mapping.Y.dataset",
      "hpp_mapping.Y.field"
    ],
    "fallback_priority": [
      "explicit_field",
      "modeling_directives",
      "literature_estimate",
      "equation_inference_hints",
      "global_default"
    ],
    "max_missing_ratio": 0.3,
    "missing_flag_prefix": "input_missing:",
    "recommended_fields": [
      "epsilon.tau.core.index",
      "epsilon.tau.core.horizon",
      "epsilon.rho.Z",
      "literature_estimate.theta_hat",
      "literature_estimate.ci",
      "literature_estimate.design",
      "literature_estimate.model"
    ],
    "target_fill_rate_min": 0.7
  },
  "_template_name": "HPP Unified Input Template (E1-E6, equation_type optional)",
  "_template_version": "1.2.0",
  "analysis_plan": {
    "multiomics": [],
    "sensitivity": {
      "alternative_models": [
        "iptw",
        "ps_matching"
      ],
      "e_value": true,
      "leave_one_out": true,
      "run": true
    },
    "subgroup": []
  },
  "edge_id": "EV-YYYY-UNIQUE#N",
  "epsilon": {
    "Pi": "...",
    "_iota_1_note": "Used by E6 only. Can stay null for non-E6 edges.",
    "_iota_2_note": "Used by E6 only. Can stay null for non-E6 edges.",
    "alpha": {
      "assumption_required": [],
      "assumptions": [],
      "id_strategy": "...",
      "status": "identified|partially_identified|not_identified"
    },
    "iota": {
      "core": {
        "name": "..."
      },
      "ext": {
        "contrast_type": "category|per_unit|arm_vs_control|dose|binary|continuous",
        "tx_encoding": "identity|log|one_hot|custom",
        "unit": null,
        "x0": null,
        "x1": null
      }
    },
    "iota_1": {
      "core": {
        "name": null
      },
      "ext": {
        "contrast_type": null,
        "unit": null,
        "x0": null,
        "x1": null
      }
    },
    "iota_2": {
      "core": {
        "name": null
      },
      "ext": {
        "contrast_type": null,
        "unit": null,
        "x0": null,
        "x1": null
      }
    },
    "mu": {
      "core": {
        "family": "difference|ratio",
        "scale": "identity|log",
        "type": "MD|logOR|logRR|logHR|RD|beta|SD"
      },
      "ext": {}
    },
    "o": {
      "name": "...",
      "type": "continuous|binary|survival"
    },
    "rho": {
      "IV": null,
      "M": [],
      "X": "...",
      "X1": null,
      "X2": null,
      "Y": "...",
      "Z": [
        "..."
      ],
      "_M_note": "E4 mediator role(s). Empty list for non-E4.",
      "_X1_X2_note": "E6 joint intervention roles. null for non-E6."
    },
    "tau": {
      "core": {
        "horizon": "...",
        "index": "...",
        "tau_aligned": null
      },
      "ext": {
        "baseline_window": null,
        "follow_up_window": null,
        "time_grid": null
      }
    },
    "z_context": {
      "individual": null,
      "subgroup": null
    }
  },
  "equation_inference_hints": {
    "has_counterfactual_query": false,
    "has_joint_intervention": false,
    "has_longitudinal_timepoints": false,
    "has_mediator": false,
    "has_survival_outcome": false
  },
  "equation_type": null,
  "equation_version": "1.0",
  "hpp_mapping": {
    "IV": null,
    "M": [],
    "X": {
      "dataset": "...",
      "field": "...",
      "notes": "",
      "status": "manual|auto_resolved"
    },
    "X1": null,
    "X2": null,
    "Y": {
      "dataset": "...",
      "field": "...",
      "notes": "",
      "status": "manual|auto_resolved"
    },
    "Z": [],
    "_M_note": "E4 mediator mappings. Example item: {\"name\":\"CRP\",\"dataset\":\"016-blood_tests\",\"field\":\"bt__crp_float_value\",\"status\":\"manual\",\"notes\":\"\"}",
    "_X1_X2_note": "E6 joint intervention mappings.",
    "_context_note": "E5 individual context mappings. If empty, fallback to epsilon.rho.Z.",
    "context": []
  },
  "literature_estimate": {
    "_decomposed_effects_note": "Optional literature block for E4.",
    "adjustment_set": [
      "..."
    ],
    "ci": [
      null,
      null
    ],
    "ci_level": 0.95,
    "decomposed_effects": {
      "NDE": {
        "ci": [
          null,
          null
        ],
        "p_value": null,
        "theta_hat": null
      },
      "NIE": {
        "ci": [
          null,
          null
        ],
        "p_value": null,
        "theta_hat": null
      },
      "TE": {
        "ci": [
          null,
          null
        ],
        "p_value": null,
        "theta_hat": null
      }
    },
    "design": "RCT|cohort|cross-sectional|MR|registry|other",
    "grade": "A|B|C",
    "model": "...",
    "n": null,
    "p_value": null,
    "ref": "...",
    "theta_hat": null
  },
  "modeling_directives": {
    "e1": {
      "enabled": null,
      "model_preference": [
        "OLS",
        "Logistic",
        "Poisson"
      ],
      "target_parameter": "beta_X"
    },
    "e2": {
      "censor_definition": null,
      "enabled": null,
      "event_definition": null,
      "model_preference": [
        "CoxPH",
        "Logistic_survival_proxy"
      ],
      "target_parameter": "beta_X_logHR"
    },
    "e3": {
      "enabled": null,
      "model_preference": [
        "LMM",
        "GEE",
        "OLS_fallback"
      ],
      "subject_id_variable": "participant_id",
      "target_parameter": "beta_XT",
      "time_variable": "time"
    },
    "e4": {
      "decomposition_scale": "identity|log",
      "enabled": null,
      "mediator_model": "auto",
      "outcome_model": "auto",
      "primary_target": "TE",
      "target_effects": [
        "TE",
        "NDE",
        "NIE"
      ],
      "time_order": {
        "m_time": null,
        "rule": "t_X < t_M < t_Y",
        "x_time": null,
        "y_time": null
      }
    },
    "e5": {
      "assumption_required": [
        "model_approximation_not_true_counterfactual"
      ],
      "context_window": {
        "lookback": null,
        "step": null
      },
      "counterfactual_contrast": {
        "x0": null,
        "x1": null
      },
      "enabled": null,
      "estimand": "tau_i",
      "model": {
        "base_model": "linear|xgboost|lightgbm",
        "type": "T_learner|S_learner|DR"
      },
      "uncertainty": {
        "ci_level": 0.95,
        "method": "bootstrap|posterior",
        "n_bootstrap": 500
      }
    },
    "e6": {
      "assumption_required": [
        "beta12_zero_if_additive_fallback"
      ],
      "enabled": null,
      "fallback_additive_if_unidentifiable": true,
      "interaction": {
        "enabled": true,
        "term": "X1*X2"
      },
      "joint_contrast": {
        "x0": [
          null,
          null
        ],
        "x1": [
          null,
          null
        ]
      },
      "primary_target": "beta_12"
    }
  },
  "pi": {
    "design": "...",
    "grade": "...",
    "n_literature": null,
    "ref": "...",
    "source": "pdf_extraction"
  },
  "provenance": {
    "extractor": "manual|llm|hybrid",
    "page": null,
    "pdf_name": "...",
    "table_or_figure": null
  },
  "schema_version": "1.1"
}
